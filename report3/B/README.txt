bounded.cに実装

仕様でbuf内には自然数を入れることになっている
(EMPTYが-1なので)

bounded.cでコメントアウトされている4行を入れると、動きが追跡できる
Condition Variableはreadとwrittenの2つで、readは書きこむ際の読み込み待ち、writtenは読みこむ際の書込み待ち

最初、pthread_cond_waitのところをwhileループではなくif文にしていたら、put待ちでプログラムが終了しないことが一定確率で発生した
この原因を考察した
whileとifで違う結果になりうるのは、bb_buf[last]にputしたのに、bb_buf[last]の中身がない扱いになっているということである
しかし動きは追ったものの間違いがなさそう
デバッグした結果signalのところで操作が逆転している様子
検索した結果
spurious wakeup
というのがあるらしく、低確率だが何もしていないのに、ブロックが解除される現象が発生するらしい(IBMのマニュアルより)
したがって仕様のせいらしい(whileだと、ブロックが解除されても必ず止まるので大丈夫)
